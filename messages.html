<!DOCTYPE html>
<html lang="en">
<head>
    
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alumni-Student Platform - Messaging</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h2>Messages</h2>
        <div class="message-thread">
            <div class="message">
                <p><strong>John:</strong> Hi, nice to connect!</p>
            </div>
            <div class="message">
                <p><strong>You:</strong> Thanks, looking forward to learning more about your work.</p>
            </div>
            <!-- More messages can be added here -->
        </div>
        <form action="/send_message" method="POST">
            <input type="text" name="message" placeholder="Type your message here" required>
            <button type="submit">Send</button>
        </form>
    </div>
    <script src= "firebase.js"></script>
    <script>
        const db = firebase.firestore();  // Or firebase.database() for Realtime Database
      
        // Function to send a message
        function sendMessage() {
            const message = document.getElementById('message').value;
            if (message.trim()) {
                const userId = firebase.auth().currentUser.uid;
                const chatBox = document.getElementById('chat-box');
      
                db.collection("messages").add({
                    userId,
                    message,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                })
                .then(() => {
                    document.getElementById('message').value = '';
                })
                .catch((error) => console.error("Error sending message:", error));
            }
        }
      
        // Listen for new messages
        db.collection("messages").orderBy("timestamp")
            .onSnapshot(snapshot => {
                const chatBox = document.getElementById('chat-box');
                chatBox.innerHTML = ""; // Clear chat box
                snapshot.forEach(doc => {
                    const message = doc.data().message;
                    const timestamp = doc.data().timestamp.toDate().toLocaleTimeString();
                    chatBox.innerHTML += `<div class="chat-message"><span>${message}</span> <span>${timestamp}</span></div>`;
                });
            });
      </script>
      
</body>
</html>